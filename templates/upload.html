<!doctype html>
<html lang="ko">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&family=Noto+Sans+KR:wght@400;500&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/upload.css') }}">

    <script>
        function posting() {
            let nickname = localStorage.getItem('nickname');
            let accountEmail = localStorage.getItem('accountEmail');
            let title = $('#title').val()
            let content = $("#content").val()
            let category = $("#category").val()
            let price = $("#price").val()
            let num = $("#num").val()
            let file = $('#file')[0].files[0]
            let form_data = new FormData()

            if (title == '') {
                alert("ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”")
                return;
            }
            
            if (content == '') {
                alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”")
                return;
            }

            if (category == '') {
                alert(" ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš” ")
                return;
            }

            if (num == '') {
                alert("ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")
                return;
            }

            if (file == '' || file == null) {
                alert("íŒŒì¼ì„ ì²¨ë¶€ í•´ì£¼ì„¸ìš”")
                return;
            }

            form_data.append("file_give", file)
            form_data.append("title_give", title)
            form_data.append("content_give", content)
            form_data.append("category_give", category)
            form_data.append("price_give", price)
            form_data.append("num_give", num)
            form_data.append('nickname', nickname);
            form_data.append('boardEmail', accountEmail);

            console.log(num)

            $.ajax({
                type: "POST",
                url: "/upload",
                data: form_data,
                cache: false,
                contentType: false,
                processData: false,
                success: function (response) {
                    window.location.href = '/'
                }
            });
        }

    </script>
</head>

<body>
<section class="hero is-white">
    <div class="hero-body has-text-centered" style="padding-bottom:1rem;margin:auto;">
        <h1 class="title is-sparta"></h1>
        <h4 class="subtitle is-sparta">ê°™ì´ ê°€ì¹˜ë¥¼ ë‚˜ëˆ ìš”! ğŸ’»</h4>

    </div>
</section>

<section class="section">
    <div class="container">
        <div class="box" style="max-width: 480px;margin:auto">
            <article class="media">
                <div class="media-content">
                    <div class="content">


                        <input id="title" class="input" type="title" placeholder="ì œëª©">
                        <br>
                        <br>
                        <textarea class="textarea" id="content" placeholder="íƒ€ì¸ì—ê²Œ ìƒì²˜ê°€ ë˜ëŠ” ë§ì€ ì‚­ì œ ì²˜ë¦¬ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤"></textarea>
                        <br>
                        <div class="select is-normal">
                            <select class="custom-select" id="category">
                                <option selected>ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                                <option value="ìƒí™œ-ì‹ë£Œí’ˆ">ìƒí™œ-ì‹ë£Œí’ˆ</option>
                                <option value="OTT">OTT</option>
                                <option value="ëŒ€ì¤‘êµí†µ">ëŒ€ì¤‘êµí†µ</option>
                                <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                            </select>
                        </div>
                        <br>
                        <br>
                        <input id="price" class="input" type="number" placeholder="ê°€ê²©">
                        <br>
                        <br>
                        <div class="select is-normal">
                            <select class="custom-select" id="num">
                                <option value="" disabled selected>ëª¨ì§‘ ì¸ì›ìˆ˜</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="exampleFormControlFile1"></label>
                        <input type="file" class="form-control-file" id="file">
                    </div>
                    </form>

                </div>
            </article>
            <br>
            <nav class="level is-mobile">
                <button class="level-item button is-sparta is-outlined" onclick="location.href='/'">
                    ë’¤ë¡œê°€ê¸°
                </button>
                <button class="level-item button is-sparta" onclick="posting()">
                    ì €ì¥í•˜ê¸°
                </button>

            </nav>
        </div>

    </div>


    </div>
</section>

</body>
</html>